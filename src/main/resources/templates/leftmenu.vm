<nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle" src="img/profile_small.jpg" />
                             </span>
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">陈龙</strong>
                             </span> <span class="text-muted text-xs block">系统管理员 <b class="caret"></b></span> </span> </a>
                    <ul class="dropdown-menu animated fadeInRight m-t-xs">
                        <li><a href="profile.html">个人设置</a></li>
                        <li><a href="contacts.html">公司电话簿</a></li>
                        <li><a href="mailbox.html">邮件</a></li>
                        <li class="divider"></li>
                        <li><a href="login.html">退出系统</a></li>
                    </ul>
                </div>
                <div class="logo-element">
                    SOA+
                </div>
            </li>
            <li id="main_1">
                <a href="/main"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">仪表盘</span></a>
            </li>
            <li id="host_1">
                <a href="#"><i class="fa fa-desktop"></i> <span class="nav-label">主机状态</span><span class="fa arrow"></span></a>
                <ul class="nav nav-second-level">
                    <li><a href="/hosts?hostid=1">192.168.188.28</a></li>
                    <li><a href="/hosts?hostid=2">192.168.188.29</a></li>
                </ul>
            </li>
            <li>
                <a href="/invoke"><i class="fa fa-joomla"></i> <span class="nav-label">调用链监控</span> <span class="label label-primary pull-right">NEW</span></a>
            </li>
            <li>
                <a href="/invoke"><i class="fa fa-globe"></i> <span class="nav-label">中间件服务监控</span> <span class="label label-primary pull-right">NEW</span></a>
            </li>
            <li>
                <a href="#"><i class="fa fa-edit"></i> <span class="nav-label">其他日志</span><span class="fa arrow"></span></a>
                <ul class="nav nav-second-level">
                    <li><a href="graph_flot.html">错误日志</a></li>
                    <li><a href="graph_morris.html">警告日志</a></li>
                    <li><a href="graph_rickshaw.html">消息日志</a></li>
                    <li><a href="graph_chartjs.html">其他日志</a></li>
                </ul>
            </li>
            <li>
                <a href="mailbox.html"><i class="fa fa-envelope"></i> <span class="nav-label">消息与告警 </span><span class="label label-warning pull-right">16/24</span></a>
                <ul class="nav nav-second-level">
                    <li><a href="mailbox.html">Inbox</a></li>
                    <li><a href="mail_detail.html">Email view</a></li>
                    <li><a href="mail_compose.html">Compose email</a></li>
                    <li><a href="email_template.html">Email templates</a></li>
                </ul>
            </li>
            <li>
                <a href="mailbox.html"><i class="fa fa-gear"></i> <span class="nav-label">系统管理 </span><span class="fa arrow"></span></a>
                <ul class="nav nav-second-level">
                    <li><a href="mailbox.html">Inbox</a></li>
                    <li><a href="mail_detail.html">Email view</a></li>
                    <li><a href="mail_compose.html">Compose email</a></li>
                    <li><a href="email_template.html">Email templates</a></li>
                </ul>
            </li>
        </ul>
    </div>
</nav>
<script>
	function initMenu(){
	    //alert('11');
		$.ajax({
	        async: false,
	        type : "post",
	        url : '/menuslogs',
	        //data: param,
	        dataType : 'json',
	        complete: function(msg){
	            //alert('complete');
	        },
	        success : function(data) {
	        	var str="";
		        if(data){
		        	for(var i=0,len=data.length;i<len;i++){
		        		var childlen=data[i].childMenus.length;
		        		var childstr='';
		        		var iconhtml = '';
		        		if(childlen>0){
		        			childstr +='<ul class="nav nav-second-level">';
		        			for(var j=0;j<childlen;j++){
		        				childstr +='<li>'+getLevelText()+'</li>';
		        			}
		        			childstr +='</ul>';
		        			iconhtml = '<span class="fa arrow"></span>';
		        		}
		        		var url = kong(data[i].menuUrl) === ""?"#":data[i].menuUrl;
		        		str +='<li id="main_"+i><a href="'+url+'"><i class="fa '+data[i].menuIcon+'"></i>' 
		        		+'<span class="nav-label">'+data[i].menuText+'</span>'+iconhtml+'</a>'+childstr+'</li>';
		        	}
		        	$("#side-menu").append(str);
		        }
	            console.log(data);
	            //alert('data');
	        }
	    });
	}
	
	function getLevelText(){
		var '<a href="'+data[i].childMenus[j].menuUrl+'">'+data[i].childMenus[j].menuText+'</a>';
	}
	
	function getLevelIcon(){
		var iconhtml = '<span class="fa arrow"></span>';
		return iconhtml;
	}
	
	function kong(val){
		var result = val;
		if (typeof val === 'undefined' || val === '' || val === 'undefined' || val === null) result = "";
		return result;
	}
</script>